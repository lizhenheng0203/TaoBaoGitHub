(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2348c3cf"],{"3f90":function(t,e,i){},af00:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"main"}},[i("ul",[t._m(0),i("li",[i("span",[t._v("标题：")]),i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("li",[i("span",[t._v("省份：")]),i("br"),i("el-select",{staticStyle:{width:"100% !important"},attrs:{filterable:"",placeholder:"请选择"},model:{value:t.province,callback:function(e){t.province=e},expression:"province"}},t._l(t.provinceList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),i("li",[i("span",[t._v("内容：")]),i("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._m(1),i("li",[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"","on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-change":t.onChange,"file-list":t.fileList,"list-type":"picture-card","auto-upload":!1,multiple:""}},[i("i",{staticClass:"el-icon-plus"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过500kb ")])])],1),i("li",[i("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"small",type:"success",plain:""},on:{click:t.submitUpload}},[t._v("上传到服务器")])],1)]),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"danger"},[t._v(" 注意：在编写内容的时候!"),i("br"),t._v("1.可以插入[photo][1,2]格式来将图片插入内容中，数字对应着上传图片的索引;"),i("br"),t._v("2.插入< br>来对想要换行的地方进行换行; ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",[i("span",[t._v("图片上传：")])])}],o=(i("a4d3"),i("99af"),i("4de4"),i("baa5"),i("b0c0"),i("e439"),i("dbb4"),i("b64b"),i("159b"),i("ade3")),r=i("2f62");function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var c={data:function(){return{title:"",content:"",fileList:[],dialogImageUrl:"",dialogVisible:!1,province:""}},inject:["reloadLive"],computed:s({},Object(r["b"])(["provinceList"])),mounted:function(){0==this.provinceList.length&&this.$store.dispatch("live/queryProvinceList")},methods:{onChange:function(t){},handleRemove:function(t,e){},handlePreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},submitUpload:function(){var t=this,e=new FormData,i=this.$refs.upload.uploadFiles;if(!i[0])return this.$notify({title:"警告",message:"请先选择至少一张要上传的图片",type:"warning",offset:100}),!1;var n={headers:{"Content-Type":"multipart/form-data",otherdata:encodeURIComponent(JSON.stringify({title:this.title,content:this.content,province:this.province,time:(new Date).getTime()}))}};i.forEach((function(i,n){var a=i.raw.name,o=a.lastIndexOf("."),r=a.substr(o+1);a="".concat(t.title,"_").concat(n+1,".").concat(r),e.append("file"+i.raw.name,a),e.append("files",i.raw)})),this.$axios.post("http://localhost:8080/apis/live/uploadLive",e,n).then((function(e){t.$notify({title:"成功",message:"上传成功",type:"success",offset:100}),t.reloadLive()})).catch((function(e){t.$notify({title:"警告",message:"上传失败",type:"warning",offset:100})}))}}},p=c,u=(i("e6c9"),i("2877")),f=Object(u["a"])(p,n,a,!1,null,"4cf11787",null);e["default"]=f.exports},baa5:function(t,e,i){var n=i("23e7"),a=i("e58c");n({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},e58c:function(t,e,i){"use strict";var n=i("fc6a"),a=i("a691"),o=i("50c4"),r=i("b301"),l=Math.min,s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0,p=r("lastIndexOf");t.exports=c||p?function(t){if(c)return s.apply(this,arguments)||0;var e=n(this),i=o(e.length),r=i-1;for(arguments.length>1&&(r=l(r,a(arguments[1]))),r<0&&(r=i+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:s},e6c9:function(t,e,i){"use strict";var n=i("3f90"),a=i.n(n);a.a}}]);